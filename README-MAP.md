# 高德地图集成说明

## 功能概述

已成功为文物展示页面集成高德地图功能，支持：

- 📍 **地理位置展示**：在地图上显示文物馆藏位置
- 🔍 **实时筛选联动**：地图标记随用户筛选条件实时更新
- 📊 **聚合显示**：相同位置的文物数量聚合显示
- 💬 **交互信息窗口**：点击标记查看该位置的文物详情
- 🎨 **美观标记样式**：自定义地图标记样式

## 配置要求

### 1. 获取高德地图API密钥

1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册并登录账号
3. 创建应用，选择「Web端(JS API)」
4. 获取API Key和安全密钥

### 2. 配置密钥

在 `src/Wenwu.tsx` 文件中找到以下两处，替换为实际的密钥：

```typescript
// 第195行附近 - 安全密钥
window._AMapSecurityConfig = {
  securityJSCode: 'your_security_js_code_here', // 替换为实际的安全密钥
};

// 第200行附近 - API Key
script.src = 'https://webapi.amap.com/maps?v=1.4.15&key=your_api_key_here&plugin=AMap.Geocoder'; // 替换为实际的API Key
```

### 3. 域名白名单配置

在高德开放平台的应用管理中，将你的域名添加到白名单：
- 开发环境：`localhost:3000`
- 生产环境：你的实际域名

## 使用方法

1. 在文物展示页面点击地图图标切换到地图视图
2. 地图会自动显示当前筛选条件下的文物馆藏位置
3. 点击地图上的标记查看该位置的文物详情
4. 使用筛选功能，地图标记会实时更新

## 技术特性

- **地理编码缓存**：避免重复请求，提升性能
- **响应式设计**：适配不同屏幕尺寸
- **错误处理**：网络异常时的优雅降级
- **加载状态**：地图加载时的友好提示
- **自适应视野**：根据标记位置自动调整地图范围

## 注意事项

1. 高德地图API有调用频率限制，建议合理使用
2. 地理编码结果会缓存，避免重复请求
3. 确保网络连接正常，否则地图无法加载
4. 部分文物馆藏地点可能无法精确定位，会显示大概位置

## 故障排除

### 地图无法加载
- 检查API密钥是否正确配置
- 确认域名是否在白名单中
- 检查网络连接是否正常

### 标记位置不准确
- 高德地图会尽力匹配地址，但可能存在偏差
- 可以考虑手动校正重要位置的坐标

### 性能优化建议
- 地理编码结果已实现缓存
- 避免频繁切换筛选条件
- 大量数据时考虑分页或聚合显示